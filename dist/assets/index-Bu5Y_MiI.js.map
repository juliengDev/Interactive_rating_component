{"version":3,"file":"index-Bu5Y_MiI.js","sources":["../../src/home.ts"],"sourcesContent":["import \"../css/style.css\";\n\nclass RatingComponent {\n  private ratingValue: number = 0;\n  private buttonCount: number = 0;\n  private formRate: HTMLFormElement | null;\n  private ratingList: HTMLUListElement | null;\n  private buttonSubmit: HTMLButtonElement | null;\n  private modalConfirm: HTMLElement | null;\n  private ratingEl: HTMLSpanElement | null;\n  private totalEl: HTMLSpanElement | null;\n\n  constructor() {\n    this.formRate = document.querySelector<HTMLFormElement>(\".form-vote\");\n    this.ratingList = document.querySelector<HTMLUListElement>(\".rating-list\");\n    this.buttonSubmit =\n      document.querySelector<HTMLButtonElement>(\".submit-btn\");\n    this.modalConfirm = document.querySelector<HTMLElement>(\".modal\");\n    this.ratingEl = document.getElementById(\"rating\") as HTMLSpanElement | null;\n    this.totalEl = document.getElementById(\"total\") as HTMLSpanElement | null;\n\n    this.init();\n  }\n\n  private init(): void {\n    if (this.ratingList) {\n      const allButtons =\n        this.ratingList.querySelectorAll<HTMLButtonElement>(\".rating-btn\");\n      this.buttonCount = allButtons.length;\n\n      this.ratingList.addEventListener(\n        \"click\",\n        this.handleRatingClick.bind(this)\n      );\n      this.ratingList.addEventListener(\n        \"keydown\",\n        this.handleKeyDown.bind(this)\n      );\n    } else {\n      console.error(\"The element .rating-list was not found in the DOM.\");\n    }\n\n    this.buttonSubmit?.addEventListener(\"click\", this.handleSubmit.bind(this));\n    this.formRate?.addEventListener(\n      \"keydown\",\n      this.handleFormKeyDown.bind(this)\n    );\n  }\n\n  private handleRatingClick(event: Event): void {\n    event.preventDefault();\n    const target = event.target as HTMLElement;\n\n    if (target && target.tagName === \"BUTTON\") {\n      const button = target as HTMLButtonElement;\n      this.setRating(button);\n    }\n  }\n\n  private handleKeyDown(event: KeyboardEvent): void {\n    if (event.key === \"Enter\" || event.key === \" \") {\n      event.preventDefault();\n      const target = event.target as HTMLElement;\n      if (target && target.tagName === \"BUTTON\") {\n        this.setRating(target as HTMLButtonElement);\n      }\n    }\n  }\n\n  private handleFormKeyDown(event: KeyboardEvent): void {\n    if (event.key === \"Enter\" && this.ratingValue > 0) {\n      event.preventDefault();\n      this.submitRating();\n    }\n  }\n\n  private setRating(button: HTMLButtonElement): void {\n    this.ratingValue = parseInt(button.textContent || \"0\", 10);\n    this.updateButtonStyles(button);\n  }\n\n  private updateButtonStyles(selectedButton: HTMLButtonElement): void {\n    const allButtons =\n      this.ratingList?.querySelectorAll<HTMLButtonElement>(\".rating-btn\");\n    allButtons?.forEach((btn) => {\n      btn.classList.remove(\"selected\");\n      btn.setAttribute(\"aria-pressed\", \"false\");\n    });\n\n    selectedButton.classList.add(\"selected\");\n    selectedButton.setAttribute(\"aria-pressed\", \"true\");\n  }\n\n  private handleSubmit(event: Event): void {\n    event.preventDefault();\n    this.submitRating();\n  }\n\n  private submitRating(): void {\n    if (this.ratingValue > 0) {\n      if (this.ratingEl)\n        this.ratingEl.textContent = this.ratingValue.toString();\n      if (this.totalEl) this.totalEl.textContent = this.buttonCount.toString();\n\n      this.formRate?.classList.add(\"hidden\");\n      this.formRate?.setAttribute(\"aria-hidden\", \"true\");\n      this.modalConfirm?.classList.remove(\"hidden\");\n      this.modalConfirm?.removeAttribute(\"aria-hidden\");\n      this.modalConfirm?.focus();\n    } else {\n      this.showError(\"Please select a rating before submitting.\");\n    }\n  }\n\n  private showError(message: string): void {\n    const errorEl = document.createElement(\"p\");\n    errorEl.textContent = message;\n    errorEl.setAttribute(\"role\", \"alert\");\n    errorEl.classList.add(\"error-message\");\n    this.formRate?.appendChild(errorEl);\n\n    setTimeout(() => {\n      errorEl.remove();\n    }, 3000);\n  }\n}\n\n// Initialisation du composant\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  new RatingComponent();\n});\n"],"names":["RatingComponent","__publicField","allButtons","_a","_b","event","target","button","selectedButton","btn","_c","_d","_e","message","errorEl"],"mappings":"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"}